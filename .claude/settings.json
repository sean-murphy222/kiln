{
  "permissions": {
    "allow": [
      "Read",
      "Glob",
      "Grep",
      "Edit",
      "MultiEdit",
      "Write",
      "Task",
      "Bash(git status*)",
      "Bash(git log*)",
      "Bash(git diff*)",
      "Bash(git branch*)",
      "Bash(git fetch*)",
      "Bash(git checkout -b *)",
      "Bash(git checkout feature/*)",
      "Bash(git add*)",
      "Bash(git commit*)",
      "Bash(git rebase*)",
      "Bash(git merge-base*)",
      "Bash(git merge-tree*)",
      "Bash(git worktree*)",
      "Bash(git stash*)",
      "Bash(git rev-list*)",
      "Bash(git rev-parse*)",
      "Bash(git show*)",
      "Bash(npm test*)",
      "Bash(npm run *)",
      "Bash(npm audit*)",
      "Bash(npm install*)",
      "Bash(npx *)",
      "Bash(pytest*)",
      "Bash(python -m pytest*)",
      "Bash(python -m mypy*)",
      "Bash(python -m coverage*)",
      "Bash(python *)",
      "Bash(pip install*)",
      "Bash(pip-audit*)",
      "Bash(flake8*)",
      "Bash(mypy*)",
      "Bash(black*)",
      "Bash(ruff*)",
      "Bash(bandit*)",
      "Bash(prettier*)",
      "Bash(eslint*)",
      "Bash(tsc *)",
      "Bash(ls*)",
      "Bash(cat*)",
      "Bash(echo*)",
      "Bash(mkdir*)",
      "Bash(cp*)",
      "Bash(mv*)",
      "Bash(head*)",
      "Bash(tail*)",
      "Bash(wc*)",
      "Bash(find*)",
      "Bash(grep*)",
      "Bash(sort*)",
      "Bash(diff*)",
      "Bash(which*)",
      "Bash(node *)",
      "Bash(pwd*)",
      "Bash(date*)",
      "Bash(touch*)",
      "Bash(sed*)",
      "Bash(awk*)",
      "Bash(jq*)",
      "Bash(tree*)",
      "Bash(xargs*)"
    ],
    "deny": [
      "Bash(rm -rf /)",
      "Bash(rm -rf ~*)",
      "Bash(rm -rf $HOME*)",
      "Bash(rm -rf /*)",
      "Bash(rm -rf .git*)",
      "Bash(git push * --force*)",
      "Bash(git push -f*)",
      "Bash(git push *--force*)",
      "Bash(git reset --hard* origin/*)",
      "Bash(curl * | bash*)",
      "Bash(curl * | sh*)",
      "Bash(wget * | bash*)",
      "Bash(wget * | sh*)",
      "Bash(chmod 777*)",
      "Bash(chmod a+w*)",
      "Bash(> /dev/sd*)",
      "Bash(mkfs*)",
      "Bash(dd if=*)"
    ]
  },
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/session-start.js startup"
          }
        ]
      },
      {
        "matcher": "resume|compact",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/session-start.js resume"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/sprint-anchor.js"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/secrets-firewall.js"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/protected-files.js"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/branch-protector.js"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/destructive-guard.js"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/dependency-auditor.js"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/format-and-lint.js",
            "timeout": 30000
          }
        ]
      },
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/change-logger.js",
            "async": true
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/quality-gate.js",
            "timeout": 120000
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/task-continuation.js"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A subagent just finished its work. Evaluate whether the output is substantive and actionable (not just 'looks good' or empty). If it's a security review or QA review, verify it contains a structured report with specific findings. Respond with JSON: {\"decision\": \"allow\"} if output is adequate, or {\"decision\": \"block\", \"reason\": \"description\"} if output is insufficient. The subagent output to evaluate: $ARGUMENTS",
            "model": "haiku"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/context-backup.js"
          }
        ]
      }
    ]
  }
}
